<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —à–∞–±–ª–æ–Ω–æ–≤ –∑–¥–∞–Ω–∏–π</title>
    
    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ CSS —Å—Ç–∏–ª–µ–π -->
    <link rel="stylesheet" href="building-templates/building-templates.css">
    
    <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞ -->
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #1a1a1a;
            overflow: hidden;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∫–∞—Ä—Ç—ã */
        #map-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            z-index: 15;
            overflow: hidden;
            background: #4a7c59;
        }
        
        .main-menu-bg {
            width: 120%;
            height: 120%;
            object-fit: cover;
            pointer-events: auto;
            cursor: default;
            transition: opacity 0.3s ease;
            opacity: 1;
            transform-origin: center center;
            margin: -10%;
        }
        
        /* –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∑–æ–Ω—ã –∑–¥–∞–Ω–∏–π */
        .building-zone {
            position: absolute;
            cursor: pointer;
            border-radius: 8px;
            background: transparent;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            color: transparent;
            font-size: 18px;
            font-weight: bold;
            text-shadow: none;
            transition: none;
        }
        
        /* –£–±–∏—Ä–∞–µ–º –≤—Å–µ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã */
        .building-zone:hover,
        .building-zone.active,
        .building-zone:focus,
        .building-zone:active {
            background: transparent !important;
            border: none !important;
            box-shadow: none !important;
            transform: none !important;
        }
        
        /* –ü–∞–Ω–µ–ª—å –¥–µ–Ω–µ–≥ */
        .balance-panel {
            position: absolute;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px 15px;
            border-radius: 10px;
            font-weight: bold;
            z-index: 100;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        /* –ö–Ω–æ–ø–∫–∞ "–í—Å—è –∫–∞—Ä—Ç–∞" */
        #btn-show-all {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 10px;
            cursor: pointer;
            display: none;
            align-items: center;
            gap: 8px;
            z-index: 100;
        }
        
        #btn-show-all:hover {
            background: rgba(0, 0, 0, 0.9);
        }
        
        /* –ü–∞–Ω–µ–ª—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∑–¥–∞–Ω–∏–∏ */
        #building-info-panel {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 20px;
            border-radius: 15px;
            display: none;
            z-index: 200;
            max-width: 400px;
            width: 90%;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç */
        .debug-mode .building-zone {
            border: 2px solid red !important;
            background: rgba(255, 0, 0, 0.2) !important;
            color: white !important;
        }
    </style>
</head>
<body>
    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–∞—Ä—Ç—ã -->
    <div id="map-container">
        <!-- –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã -->
        <img src="assets/png/main-menu-bg.png" alt="–ö–∞—Ä—Ç–∞" class="main-menu-bg" id="main-menu-image">
        
        <!-- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∑–æ–Ω—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —à–∞–±–ª–æ–Ω–∞–º–∏ -->
        
        <!-- –ö–Ω–æ–ø–∫–∞ "–í—Å—è –∫–∞—Ä—Ç–∞" -->
        <button id="btn-show-all">
            <img src="assets/icons/arrow-small-left.svg" alt="‚Üê" style="width:16px;height:16px;">
            –í—Å—è –∫–∞—Ä—Ç–∞
        </button>
    </div>
    
    <!-- –ü–∞–Ω–µ–ª—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∑–¥–∞–Ω–∏–∏ -->
    <div id="building-info-panel">
        <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
    </div>
    
    <!-- –ü–∞–Ω–µ–ª—å –¥–µ–Ω–µ–≥ -->
    <div id="money-panel" class="balance-panel" style="top:10px;left:10px;">
        <span>üí∞</span>
        <span id="money-amount">100000</span>
    </div>
    
    <!-- –ü–∞–Ω–µ–ª—å –∫—Ä–µ–¥–∏—Ç–æ–≤ -->
    <div id="credits-panel" class="balance-panel" style="top:10px;right:80px;">
        <span>üíé</span>
        <span id="credits-amount">0</span>
    </div>
    
    <!-- –ö–Ω–æ–ø–∫–∞ –æ—Ç–ª–∞–¥–∫–∏ (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏) -->
    <button id="debug-toggle" style="position: fixed; bottom: 20px; right: 20px; z-index: 1000; background: #ff6b6b; color: white; border: none; padding: 10px; border-radius: 5px; cursor: pointer;">
        Debug Mode
    </button>
    
    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ JavaScript —Ñ–∞–π–ª–æ–≤ -->
    
    <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à–∏ –ø—É—Ç–∏) -->
    <script>
        // –ó–∞–≥–ª—É—à–∫–∏ –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ)
        window.getPlayerMoney = function() {
            return parseInt(document.getElementById('money-amount').textContent) || 100000;
        };
        
        window.setPlayerMoney = function(amount) {
            document.getElementById('money-amount').textContent = amount;
        };
        
        window.showNotification = function(message, type) {
            console.log(`[${type.toUpperCase()}] ${message}`);
            // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ä–µ–∞–ª—å–Ω—É—é —Å–∏—Å—Ç–µ–º—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        };
        
        window.hideProfitIndicators = function() {
            // –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è —Å–∫—Ä—ã—Ç–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –ø—Ä–∏–±—ã–ª–∏
        };
        
        window.zoomToBuilding = function(building, name) {
            console.log(`Zooming to ${name} (${building})`);
            // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∞–Ω–∏–º–∞—Ü–∏—é –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏—è
            // –ü–æ–∫–∞ –ø—Ä–æ—Å—Ç–æ –æ—Ç–∫—Ä—ã–≤–∞–µ–º –ø–∞–Ω–µ–ª—å
            if (window[`open${building.charAt(0).toUpperCase() + building.slice(1)}Panel`]) {
                window[`open${building.charAt(0).toUpperCase() + building.slice(1)}Panel`]();
            }
        };
        
        window.closeBuildingPanel = function() {
            const panel = document.getElementById('building-panel');
            if (panel) {
                panel.remove();
            }
        };
        
        // –ó–∞–≥–ª—É—à–∫–∏ –¥–ª—è —Å–∏—Å—Ç–µ–º—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
        window.getEmpByBuilding = function(building) {
            return null; // –ù–µ—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
        };
        
        window.openAssignOverlay = function(building) {
            console.log(`Opening employee assignment for ${building}`);
            // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ä–µ–∞–ª—å–Ω–æ–µ –º–µ–Ω—é –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
        };
        
        // –ó–∞–≥–ª—É—à–∫–∏ –¥–ª—è —Å–∏—Å—Ç–µ–º—ã —Å–∫–ª–∞–¥–∞
        window.storedBooks = 0;
        window.storedMags = 0;
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–µ–Ω–µ–≥
        function updateMoneyDisplay() {
            const moneyElement = document.getElementById('money-amount');
            if (moneyElement) {
                const amount = parseInt(moneyElement.textContent);
                moneyElement.textContent = amount.toLocaleString();
            }
        }
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–µ–Ω–µ–≥ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', updateMoneyDisplay);
    </script>
    
    <!-- –®–∞–±–ª–æ–Ω—ã –∑–¥–∞–Ω–∏–π -->
    <script src="building-templates/library-template.js"></script>
    <script src="building-templates/factory-template.js"></script>
    <script src="building-templates/storage-template.js"></script>
    <script src="building-templates/print-template.js"></script>
    
    <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π JavaScript –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞ -->
    <script>
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–í—Å—è –∫–∞—Ä—Ç–∞"
        document.getElementById('btn-show-all').addEventListener('click', function() {
            const mapContainer = document.getElementById('map-container');
            mapContainer.style.display = 'block';
            this.style.display = 'none';
            
            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –ø–∞–Ω–µ–ª–∏ –∑–¥–∞–Ω–∏–π
            window.closeBuildingPanel();
        });
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –æ—Ç–ª–∞–¥–∫–∏
        document.getElementById('debug-toggle').addEventListener('click', function() {
            document.body.classList.toggle('debug-mode');
            this.textContent = document.body.classList.contains('debug-mode') ? 'Normal Mode' : 'Debug Mode';
        });
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
        function setupMoneyWatcher() {
            const moneyElement = document.getElementById('money-amount');
            if (moneyElement) {
                const observer = new MutationObserver(function(mutations) {
                    mutations.forEach(function(mutation) {
                        if (mutation.type === 'childList' || mutation.type === 'characterData') {
                            updateMoneyDisplay();
                        }
                    });
                });
                
                observer.observe(moneyElement, {
                    childList: true,
                    characterData: true,
                    subtree: true
                });
            }
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ –ü—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —à–∞–±–ª–æ–Ω–æ–≤ –∑–¥–∞–Ω–∏–π –∑–∞–≥—Ä—É–∂–µ–Ω');
            setupMoneyWatcher();
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
            setTimeout(() => {
                console.log(`
üìã –ò–ù–°–¢–†–£–ö–¶–ò–ò –ü–û –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ:

1. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∑–¥–∞–Ω–∏—è –Ω–∞ –∫–∞—Ä—Ç–µ –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É "Debug Mode" –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∑–æ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ —Ñ–∞–π–ª–∞—Ö —à–∞–±–ª–æ–Ω–æ–≤ –ø–æ–¥ –≤–∞—à—É –∫–∞—Ä—Ç—É

üè¢ –î–û–°–¢–£–ü–ù–´–ï –ó–î–ê–ù–ò–Ø:
- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ (–±–µ—Å–ø–ª–∞—Ç–Ω–∞—è)
- –ó–∞–≤–æ–¥ (20,000)
- –ü–æ—á—Ç–∞ (15,000) 
- –¢–∏–ø–æ–≥—Ä–∞—Ñ–∏—è (25,000)

üí° –°–û–í–ï–¢: –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ (F12) –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ª–æ–≥–æ–≤
                `);
            }, 1000);
        });
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
        document.getElementById('main-menu-image').adderror = function() {
            console.warn('‚ö†Ô∏è –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω–æ. –ó–∞–º–µ–Ω–∏—Ç–µ –ø—É—Ç—å –≤ src –∞—Ç—Ä–∏–±—É—Ç–µ.');
            this.style.display = 'none';
        };
    </script>
</body>
</html>
